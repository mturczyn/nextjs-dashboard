# Next.js App Router Course

## Starter Template

This is the starter template for the Next.js App Router Course. It contains the starting code for the dashboard application.

For more information, see the [course curriculum](https://nextjs.org/learn) on the Next.js Website.

## Notes

### Chapter 13 - Error Handling

In order to add global error handler in Next.js, we need to add `error.tsx` file.
It works similair to `layout.tsx`, it is applied to all sub-routes (so subdirectories).

#### Not Found 404

In order to handle not found error, `page.tsx` component should use `notFound` method from `next/navigation`, which sets correct HTTP code. Then, create `not-found.tsx` file, which will display not found page.

This takes precednce over `error.tsx` page.

### Chapter 14 - Accessibility

Next.js has built-in accessibility check, which can be performed by `next lint` command. By adding to `package.json`, we can then use it in CI/CD pipeline or in local development, etc.

### Chapter 15 - Authentication

In order to introduce authentication, we need to install `next-auth@beta` package that will handle authentication logic.

Next, we need `openssl` tool to generate auth secret - the command is `openssl rand -base64 32` - then paste it in `.env` file `AUTH_SECRET=your-secret-key`.

Then, in root, we need to add following files:

-   `auth.config.ts` - contains onfiguration options for NextAuth.js package (in our case, contains only `pages` option - it redirects unauthenticated user to that page),

Then, add Next.js middleware to protect routes from being accessed by unauthenticated user.

This is done by defining `callbacks` in `auth.config.ts` file and adding middleware in `middleware.ts` file in root directory (at the same level as app or pages or src folder).

Then we create forms in order to handle log in and log out actions, and create server actions to handle those. Most of implementation is in the NextAuth.js package, which exposes `auth`, `signIn` and `signOut` methods.

For password hashing `bcrypt` package is used.

### Chapter 16 - Metadata

Metada is included in `meta` elements. Most popular are:

- Title Metadata: Responsible for the title of a webpage that is displayed on the browser tab. It's crucial for SEO as it helps search engines understand what the webpage is about.
```
<title>Page Title</title>
```
- Description Metadata: This metadata provides a brief overview of the webpage content and is often displayed in search engine results.
```
<meta name="description" content="A brief description of the page content." />
```
- Keyword Metadata: This metadata includes the keywords related to the webpage content, helping search engines index the page.
```
<meta name="keywords" content="keyword1, keyword2, keyword3" />
```
- Open Graph Metadata: This metadata enhances the way a webpage is represented when shared on social media platforms, providing information such as the title, description, and preview image.
```
<meta property="og:title" content="Title Here" />
<meta property="og:description" content="Description Here" />
<meta property="og:image" content="image_url_here" />
```
- Favicon Metadata: This metadata links the favicon (a small icon) to the webpage, displayed in the browser's address bar or tab.
```
<link rel="icon" href="path/to/favicon.ico" />
```
In Next.js we can add meta-data in two ways:
- config-based - export a `static metadata` object or a dynamic `generateMetadata` function in `layout.js` or `page.js`
- file-based - special files like `favicon.ico` are automatically included in metadata.

#### file-based
Just move files like `favicon.ico` or `opengraph-image.png` tp `app` directory and all meta information will be autogenerated (`meta` elements for open graph, etc.).

#### config-based

Just declare something along these lines in `page.tsx` or `layout.tsx` (see `app\layout.tsx` or `app\dashboard\invoices\page.tsx` for reference):
```
import { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'Acme Dashboard',
  description: 'The official Next.js Course Dashboard, built with App Router.',
  metadataBase: new URL('https://next-learn-dashboard.vercel.sh'),
};
```
We can also use title template instead of just title to provide template for other pages, such as:
```
title: {
    template: '%s | Acme Dashboard',
    default: 'Acme Dashboard',
},
```
Other pages then need to only define, for example `Invoices` to get title of `Invoices | Acme Dashboard`.